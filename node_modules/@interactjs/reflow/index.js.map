{
	"version": 3,
	"sources": [
		"index.ts"
	],
	"names": [
		"Interactable",
		"EventPhase",
		"Interaction",
		"arr",
		"extend",
		"is",
		"pointer",
		"pointerUtils",
		"rect",
		"rectUtils",
		"win",
		"Reflow",
		"install",
		"scope",
		"actions",
		"actionName",
		"names",
		"eventTypes",
		"push",
		"prototype",
		"reflow",
		"action",
		"interactable",
		"elements",
		"string",
		"target",
		"from",
		"_context",
		"querySelectorAll",
		"Promise",
		"window",
		"promises",
		"element",
		"getRect",
		"runningInteraction",
		"find",
		"interactions",
		"list",
		"interaction",
		"interacting",
		"prepared",
		"name",
		"reflowPromise",
		"move",
		"_reflowPromise",
		"resolve",
		"_reflowResolve",
		"xywh",
		"tlbrToXywh",
		"coords",
		"page",
		"x",
		"y",
		"client",
		"timeStamp",
		"now",
		"event",
		"coordsToEvent",
		"startReflow",
		"all",
		"then",
		"new",
		"pointerType",
		"signalArg",
		"eventTarget",
		"phase",
		"prevEvent",
		"updatePointer",
		"_doPhase",
		"start",
		"_interacting",
		"end",
		"stop",
		"removePointer",
		"pointerIsDown",
		"id",
		"listeners",
		"remove"
	],
	"mappings": "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",
	"sourcesContent": [
		"import Interactable from '@interactjs/core/Interactable'\nimport { EventPhase } from '@interactjs/core/InteractEvent'\nimport { ActionProps, Interaction } from '@interactjs/core/Interaction'\nimport { Scope } from '@interactjs/core/scope'\nimport { arr, extend, is, pointer as pointerUtils, rect as rectUtils, win } from '@interactjs/utils/index'\n\ndeclare module '@interactjs/core/Interactable' {\n  interface Interactable {\n    reflow: (action: ActionProps) => ReturnType<typeof reflow>\n  }\n}\n\ndeclare module '@interactjs/core/Interaction' {\n  interface Interaction {\n    _reflowPromise: Promise<void>\n    _reflowResolve: () => void\n  }\n}\n\ndeclare module '@interactjs/core/InteractEvent' {\n  // eslint-disable-next-line no-shadow\n  enum EventPhase {\n    Reflow = 'reflow',\n  }\n}\n\n(EventPhase as any).Reflow = 'reflow'\n\nexport function install (scope: Scope) {\n  const {\n    actions,\n    /** @lends Interactable */\n    // eslint-disable-next-line no-shadow\n    Interactable,\n  } = scope\n\n  // add action reflow event types\n  for (const actionName of actions.names) {\n    actions.eventTypes.push(`${actionName}reflow`)\n  }\n\n  /**\n   * ```js\n   * const interactable = interact(target)\n   * const drag = { name: drag, axis: 'x' }\n   * const resize = { name: resize, edges: { left: true, bottom: true }\n   *\n   * interactable.reflow(drag)\n   * interactable.reflow(resize)\n   * ```\n   *\n   * Start an action sequence to re-apply modifiers, check drops, etc.\n   *\n   * @param { Object } action The action to begin\n   * @param { string } action.name The name of the action\n   * @returns { Promise } A promise that resolves to the `Interactable` when actions on all targets have ended\n   */\n  Interactable.prototype.reflow = function (action) {\n    return reflow(this, action, scope)\n  }\n}\n\nfunction reflow (interactable: Interactable, action: ActionProps, scope: Scope): Promise<Interactable> {\n  const elements = (is.string(interactable.target)\n    ? arr.from(interactable._context.querySelectorAll(interactable.target))\n    : [interactable.target]) as Interact.Element[]\n\n  // tslint:disable-next-line variable-name\n  const Promise = (win.window as any).Promise\n  const promises: Array<Promise<null>> | null = Promise ? [] : null\n\n  for (const element of elements) {\n    const rect = interactable.getRect(element as HTMLElement | SVGElement)\n\n    if (!rect) { break }\n\n    const runningInteraction = arr.find(\n      scope.interactions.list,\n      (interaction: Interaction) => {\n        return interaction.interacting() &&\n          interaction.interactable === interactable &&\n          interaction.element === element &&\n          interaction.prepared.name === action.name\n      })\n    let reflowPromise: Promise<null>\n\n    if (runningInteraction) {\n      runningInteraction.move()\n\n      if (promises) {\n        reflowPromise = runningInteraction._reflowPromise || new Promise((resolve: any) => {\n          runningInteraction._reflowResolve = resolve\n        })\n      }\n    }\n    else {\n      const xywh = rectUtils.tlbrToXywh(rect)\n      const coords = {\n        page     : { x: xywh.x, y: xywh.y },\n        client   : { x: xywh.x, y: xywh.y },\n        timeStamp: scope.now(),\n      }\n\n      const event = pointerUtils.coordsToEvent(coords)\n      reflowPromise = startReflow(scope, interactable, element, action, event)\n    }\n\n    if (promises) {\n      promises.push(reflowPromise)\n    }\n  }\n\n  return promises && Promise.all(promises).then(() => interactable)\n}\n\nfunction startReflow (scope: Scope, interactable: Interactable, element: Interact.Element, action: ActionProps, event: any) {\n  const interaction = scope.interactions.new({ pointerType: 'reflow' })\n  const signalArg = {\n    interaction,\n    event,\n    pointer: event,\n    eventTarget: element,\n    phase: EventPhase.Reflow,\n  }\n\n  interaction.interactable = interactable\n  interaction.element = element\n  interaction.prepared = extend({}, action)\n  interaction.prevEvent = event\n  interaction.updatePointer(event, event, element, true)\n\n  interaction._doPhase(signalArg)\n\n  const reflowPromise = (win.window as unknown as any).Promise\n    ? new (win.window as unknown as any).Promise((resolve: any) => {\n      interaction._reflowResolve = resolve\n    })\n    : null\n\n  interaction._reflowPromise = reflowPromise\n  interaction.start(action, interactable, element)\n\n  if (interaction._interacting) {\n    interaction.move(signalArg)\n    interaction.end(event)\n  }\n  else {\n    interaction.stop()\n  }\n\n  interaction.removePointer(event, event)\n  interaction.pointerIsDown = false\n\n  return reflowPromise\n}\n\nexport default {\n  id: 'reflow',\n  install,\n  listeners: {\n    // remove completed reflow interactions\n    'interactions:stop': ({ interaction }, scope) => {\n      if (interaction.pointerType === EventPhase.Reflow) {\n        if (interaction._reflowResolve) {\n          interaction._reflowResolve()\n        }\n\n        arr.remove(scope.interactions.list, interaction)\n      }\n    },\n  },\n} as Interact.Plugin\n"
	]
}